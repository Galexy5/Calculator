<!DOCTYPE html>
<html>
<head>
		<link rel="stylesheet" type="text/css" href="calc.css">
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
	<title>Calculator</title>
</head>
<body>
<div class="calculator">
 <div class="screen">0</div>
	<div class="buttons">
		
		
		<button class="numbers" value="7">7</button>
		<button class="numbers" value="8">8</button>
		<button class="numbers" value="9">9</button>
		<button class="operators" value="/">/</button>
		<button class="numbers" value="4">4</button>
		<button class="numbers" value="5">5</button>
		<button class="numbers" value="6">6</button>
		<button class="operators" value="x">x</button>    
		<button class="numbers" value="1">1</button>	
		<button class="numbers" value="2">2</button>
		<button class="numbers" value="3">3</button>	
		<button class="operators" value="-">-</button>
		<button class="numbers" value="0">0</button>
		<button class="operators" value=".">.</button>
		<button class="operators" value="+">+</button>
		<button class="operators" value="=">=</button>
		
		<button class="operators" value="C">C</button>

	</div>

</div>
<script type="text/javascript">

let input=document.querySelector('.screen');

let n1,n2;
let next_n=false;
let op_pressed;
let tmp_n;
let tmp_o;

const buttons=document.querySelector('.buttons');

buttons.addEventListener("click", function(event)
{

	

	if(event.target.className=="numbers")
	{

		if(op_pressed=="="){input.innerText="";}

		if(next_n)
		{
			input.innerText="";
			input.innerText+=event.target.value; 
			n2=parseFloat(input.innerText);
			next_n=false;

		}else
		{	
			if(input.innerText=="0")
			{
				input.innerText=event.target.value;
				n1=parseFloat(input.innerText);
			}else
			{
				input.innerText+=event.target.value;   // NA BALO PERIORISMO STO LENGTH
				n1=parseFloat(input.innerText);
			}
		}
		
	}else
	{
		if(event.target.value=="C")
		{
			input.innerText="0";
			n1=undefined;
			n2=undefined;
			op_pressed=undefined;
			next_n=false;
		}else if(event.target.value=="=" && n2!=undefined)
		{

			  if(tmp_o!=undefined && tmp_n!=undefined)
					{
						n2=operator(tmp_n,n2,op_pressed);
						input.innerText=operator(n1,n2,tmp_o).toString();
						n1=operator(n1,n2,tmp_o);
					}else
					{
						n2=parseFloat(input.innerText);
						input.innerText=operator(n1,n2,op_pressed).toString();
						n1=operator(n1,n2,op_pressed);
						
					}
						op_pressed=event.target.value;
						tmp_o=undefined;
						tmp_n=undefined;
						
						n2=undefined;
						next_n=false

				
			  }else if(event.target.value==".")
			    {
				input.innerText+="."
				;
				}else
				{

					if(op_pressed!=event.target.value && event.target.value=="x" || event.target.value=="/")
					{
						tmp_o=op_pressed;
					}
					

					if(tmp_o!=undefined && tmp_n!=undefined)
					{
						n2=operator(tmp_n,n2,op_pressed);
						input.innerText=operator(n1,n2,tmp_o).toString();
						n1=operator(n1,n2,tmp_o);
						n2=undefined;
						tmp_o=undefined;
						tmp_n=undefined;
					}
					
					if(n2==undefined)
					{
					
					n1=parseFloat(input.innerText);
					
					}else
					{
						n2=parseFloat(input.innerText);
						
						if(event.target.value!="x" && event.target.value!="/" && tmp_o==undefined && tmp_n==undefined)
						{
							input.innerText=operator(n1,n2,op_pressed).toString();
							n1=operator(n1,n2,op_pressed);
							n2=undefined;

						}else
						{
							tmp_n=n2;
							
						}
						
					}
					next_n=true;
					op_pressed=event.target.value;

				}					

	}
		
	
	
	
});
	
let add=(a,b)=> a+b;
let subtract=(a,b)=> a-b;
let multiply=(a,b)=> a*b;
let divide=(a,b)=>a/b;

function operator(a,b,op)
{
	if(op=="+")
	{
	    return add(a,b);
	}else if(op=="-")
	{
		return subtract(a,b);
	}else if(op=="x")
	{
		return multiply(a,b);
	}else
	{
		return divide(a,b);
	}
}

</script> 
</body>
</html>